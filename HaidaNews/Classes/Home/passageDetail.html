<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../../css/mui.min.css" rel="stylesheet" />
	</head>

	<body>
		<script src="../../js/mui.min.js"></script>
		<script src="../Others/Request/request.js"></script>
		<script type="text/javascript">
			mui.init()
		</script>
		<header class="mui-bar mui-bar-nav">
			<a class="mui-icon mui-icon-back" id="back" href="javascript:;" onclick="back()"></a>
	    		<h1 class="mui-title" id="title"></h1>
		</header>
		
		
		<div class="mui-content" id="main_content" style="background-color: white;">
			<textarea id="template" style="display: none; "></textarea>
		</div>
		<script type="text/javascript">
			mui.plusReady(function()
			{
				var current = plus.webview.currentWebview();
				document.getElementById('title').innerHTML = current.passage.News_Title;
				var localPassageContent = localStorage.getItem(current.passage.NewsID);
				if(localPassageContent != null)
				{
					document.getElementById("template").value = localPassageContent;

				}else{				
					var url = passageDetailRequestAdress + current.passage.NewsID;
					mui.ajax(url,{
						dataType: 'json', //服务器返回json格式数据
							type: 'get', //HTTP请求类型
							timeout: 10000, //超时时间设置为10秒；
							headers: { 'Content-Type': 'application/json' },
							success: function(data) {
								document.getElementById("main_content").innerHTML = data.News_Content;
								localStorage.setItem(current.passage.NewsID,data.News_Content);
							},
							error: function(xhr, type, errorThrown) {
								//异常处理；
								console.log(type);
								mui.toast('网络连接超时');

						}
					});
				}

			});
			function back()
			{
				plus.webview.currentWebview().hide();

			}

		</script>
	</body>

</html>